<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多裝置同步測試</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto p-6">
        <div class="max-w-2xl mx-auto">
            <!-- 標題 -->
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">
                    <i class="fas fa-sync-alt text-blue-500 mr-3"></i>
                    多裝置同步測試
                </h1>
                <p class="text-gray-600">測試您的進銷存系統是否能在多個裝置間同步</p>
            </div>

            <!-- 測試狀態 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">
                    <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                    測試狀態
                </h2>
                
                <div class="space-y-3">
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <span class="font-medium">當前時間</span>
                        <span id="currentTime" class="text-blue-600 font-mono"></span>
                    </div>
                    
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <span class="font-medium">頁面載入時間</span>
                        <span id="loadTime" class="text-green-600 font-mono"></span>
                    </div>
                    
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <span class="font-medium">瀏覽器資訊</span>
                        <span id="browserInfo" class="text-purple-600 text-sm"></span>
                    </div>
                    
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <span class="font-medium">裝置類型</span>
                        <span id="deviceType" class="text-orange-600"></span>
                    </div>
                </div>
            </div>

            <!-- 同步測試 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">
                    <i class="fas fa-cogs text-green-500 mr-2"></i>
                    同步測試
                </h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">測試訊息</label>
                        <input type="text" id="testMessage" placeholder="輸入測試訊息" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div class="flex space-x-3">
                        <button onclick="saveTestData()" 
                                class="flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                            <i class="fas fa-save mr-2"></i>儲存測試資料
                        </button>
                        <button onclick="loadTestData()" 
                                class="flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
                            <i class="fas fa-download mr-2"></i>載入測試資料
                        </button>
                    </div>
                    
                    <div id="testResult" class="hidden p-4 bg-gray-50 rounded-lg">
                        <h3 class="font-semibold text-gray-800 mb-2">測試結果：</h3>
                        <div id="resultContent" class="text-sm text-gray-600"></div>
                    </div>
                </div>
            </div>

            <!-- 系統連結 -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">
                    <i class="fas fa-link text-purple-500 mr-2"></i>
                    系統連結
                </h2>
                
                <div class="space-y-3">
                    <a href="index.html" 
                       class="block p-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors">
                        <div class="flex items-center justify-between">
                            <div>
                                <i class="fas fa-home text-blue-500 mr-2"></i>
                                <span class="font-medium">主系統</span>
                            </div>
                            <i class="fas fa-arrow-right text-gray-400"></i>
                        </div>
                    </a>
                    
                    <a href="pages/sales.html" 
                       class="block p-3 bg-green-50 hover:bg-green-100 rounded-lg transition-colors">
                        <div class="flex items-center justify-between">
                            <div>
                                <i class="fas fa-cash-register text-green-500 mr-2"></i>
                                <span class="font-medium">銷售作業</span>
                            </div>
                            <i class="fas fa-arrow-right text-gray-400"></i>
                        </div>
                    </a>
                    
                    <a href="pages/products.html" 
                       class="block p-3 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors">
                        <div class="flex items-center justify-between">
                            <div>
                                <i class="fas fa-box text-orange-500 mr-2"></i>
                                <span class="font-medium">商品管理</span>
                            </div>
                            <i class="fas fa-arrow-right text-gray-400"></i>
                        </div>
                    </a>
                </div>
            </div>

            <!-- 故障排除 -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">
                    <i class="fas fa-tools text-red-500 mr-2"></i>
                    故障排除
                </h2>
                
                <div class="space-y-3">
                    <button onclick="clearCache()" 
                            class="w-full bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
                        <i class="fas fa-trash mr-2"></i>清除瀏覽器快取
                    </button>
                    
                    <button onclick="forceReload()" 
                            class="w-full bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        <i class="fas fa-redo mr-2"></i>強制重新載入
                    </button>
                    
                    <button onclick="checkConnection()" 
                            class="w-full bg-indigo-500 text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">
                        <i class="fas fa-wifi mr-2"></i>檢查網路連接
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 頁面載入時初始化
        document.addEventListener('DOMContentLoaded', function() {
            updateStatus();
            setInterval(updateStatus, 1000);
        });

        // 更新狀態資訊
        function updateStatus() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleString('zh-TW');
            document.getElementById('loadTime').textContent = new Date().toLocaleString('zh-TW');
            
            // 瀏覽器資訊
            const userAgent = navigator.userAgent;
            document.getElementById('browserInfo').textContent = userAgent.substring(0, 50) + '...';
            
            // 裝置類型
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);
            document.getElementById('deviceType').textContent = isMobile ? '手機/平板' : '電腦';
        }

        // 儲存測試資料
        function saveTestData() {
            const message = document.getElementById('testMessage').value;
            if (!message) {
                alert('請輸入測試訊息');
                return;
            }
            
            const testData = {
                message: message,
                timestamp: new Date().toISOString(),
                device: navigator.userAgent,
                url: window.location.href
            };
            
            localStorage.setItem('syncTestData', JSON.stringify(testData));
            
            showResult('測試資料已儲存', testData);
        }

        // 載入測試資料
        function loadTestData() {
            const savedData = localStorage.getItem('syncTestData');
            if (!savedData) {
                showResult('沒有找到測試資料', null);
                return;
            }
            
            const testData = JSON.parse(savedData);
            showResult('測試資料已載入', testData);
        }

        // 顯示結果
        function showResult(title, data) {
            const resultDiv = document.getElementById('testResult');
            const contentDiv = document.getElementById('resultContent');
            
            let content = `<strong>${title}</strong><br>`;
            if (data) {
                content += `
                    <div class="mt-2 space-y-1">
                        <div><strong>訊息:</strong> ${data.message}</div>
                        <div><strong>時間:</strong> ${new Date(data.timestamp).toLocaleString('zh-TW')}</div>
                        <div><strong>URL:</strong> ${data.url}</div>
                    </div>
                `;
            }
            
            contentDiv.innerHTML = content;
            resultDiv.classList.remove('hidden');
        }

        // 清除快取
        function clearCache() {
            if (confirm('確定要清除瀏覽器快取嗎？')) {
                localStorage.clear();
                sessionStorage.clear();
                alert('快取已清除，頁面將重新載入');
                location.reload();
            }
        }

        // 強制重新載入
        function forceReload() {
            if (confirm('確定要強制重新載入嗎？')) {
                location.reload(true);
            }
        }

        // 檢查網路連接
        function checkConnection() {
            const startTime = Date.now();
            
            fetch('https://api.ipify.org?format=json', { 
                method: 'GET',
                mode: 'cors'
            })
            .then(response => response.json())
            .then(data => {
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                
                alert(`網路連接正常！\n\n回應時間: ${responseTime}ms\nIP地址: ${data.ip}`);
            })
            .catch(error => {
                alert(`網路連接失敗！\n\n錯誤: ${error.message}`);
            });
        }
    </script>
</body>
</html> 